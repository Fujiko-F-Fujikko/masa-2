## 機能追加

1. 選択中のアノテーションに対する操作
      - [x] バウンディングボックスのサイズ変更 
      - [x] バウンディングボックスの移動
      - [x] ラベル変更
      - [x] バウンディングボックスの削除 
2. [x] 新規アノテーション追加
      - 動画領域中のどこのアノテーションの領域でもない場所をクリックすると、新規でバウンディングボックスが生成される
      - 新規追加したアノテーションは、選択状態になり、1の操作が可能
3. [x] 新規アノテーション一括追加
      - 現在MainPanelに「シングルフレームアノテーションモード」「マルチフレームアノテーションモード」の2つの機能、またそれらに対応する「追跡開始」ボタンがありますが、これらを統合したいです。想定する操作フローは以下です。
          - 「新規アノテーション一括追加ボタン」を押したあと、同一の物体として認識したいものに対してバウンディングボックスを任意個生成する。
          - 先ほど作ったバウンディングボックスに対して、大きさや位置を調整したい場合は選択してリサイズや移動削除が可能。
          - 追加完了ボタンを押すと、ラベル入力のダイアログが出てくる。
          - ダイアログでは、既存のラベルの中から選択するか、新しいラベル名を入力する。
          - ラベルを入力してOKを押すと、現在Frame Rangeで指定されている区間に対して自動で物体検出を実行する（従来の「追跡開始」ボタン押下時の挙動に相当）。実行前に確認ダイアログを出す。
          - 検出処理が開始される。処理中は進捗がわかるような表示が「新規アノテーション一括追加ボタン」出る。
          - 検出処理が終了したら、検出されたものに対して先ほど指定したアノテーションのラベルが付与され、新しくアノテーションデータに追加される。ここで追加されるアノテーションには同一のトラックIDが付与される。
4. 一括操作
      - [x] 選択中のアノテーションと同じトラックIDのアノテーションを一括で削除
      - [x] 選択中のアノテーションと同じトラックIDのアノテーションのラベルを一括で変更
          - ラベル変更ダイアログが出てくる
              - ダイアログでは、既存のラベルの中から選択するか、新しいラベル名を入力する
          - ラベルを入力してOKを押すと、同じトラックIDのアノテーションのラベルがそれに変更される

5. [ ] UNDO/REDO機能
6. [ ] Track IDをそろえる機能
7. [x] COCO形式でのエクスポート（「カスタムJSONを保存」は削除）
    - [x] COCO JSONにエクスポートするときは現在のスコア閾値以下のものはエクスポートしないようにする
    - [x] 時間がかかるのでエクスポート中に進捗を表示するようにする。
8. [x] フレーム指定でそのフレームに移動できる機能

## 修正

* [x] TrackIDは編集できないようにする。新規追加する時は自動でIDを付与する
* [x] ダイアログでまくり問題
* [x] 現在開かれているタブがどっちかわかりずらい
* [x] 一括アノテーション追加ボタンも編集ボタンと同じようにONの時は色を変える
* [x] ショートカットキー（Space：再生・一時停止　左右キー：コマ送り　D：一括フレーム削除）

* [x] 「新規アノテーション一括追加」ボタンの仕様を以下のように変更したいです。
    1. ユーザーが「新規アノテーション一括追加」ボタンをクリックするとダイアログを出て、ユーザーがOKをクリックする。（現状のままでOK）
    2. ユーザーが自動追跡したい物体にマウスでバウンディングボックスを指定する。（現状のままでOK）
    3. バウンディングボックスの描画が終わったあとはラベル入力ダイアログが出ない。（削除）
    4. 手順2-3で追加したバウンディングボックスはほかのバウンディングボックスとは別の色で表示される（先ほどの提案のままでOK）
    5. 手順2-3で追加したバウンディングボックスに対しても、バウンディングボックスの編集（リサイズ・削除・移動）が可能。（先ほどの提案のままでOK）
    6. ユーザーは、バウンディングボックスの追加が終わったら「追加完了」ボタンをクリックする。
    7. 手順2-3で指定したバウンディングボックスに対する共通のラベルを指定するため、ラベル入力ダイアログをだす（追加）
    8. 確認ダイアログが表示され、ユーザーがOKをクリックすると処理が開始される。（（現状のままでOK）

## 実装に使用した deepwiki chat

* masa1: https://deepwiki.com/search/demovideodemowithtextpy_fd472fef-1364-4289-837b-b3768310252f
* masa2: https://deepwiki.com/search/masa-2-pyqt6-300_c3c2a440-d121-4311-a6a9-43addadd56e0
* masa3: https://deepwiki.com/search/demovideodemowithtextpy-import_4e1187b6-5ca5-4626-93a5-fc55c6f7bc70
* masa4: https://deepwiki.com/search/demovideodemowithtextpy-import_0d8d6843-e42f-4971-8b71-25d5c486b7e4
* masa5: https://deepwiki.com/search/masaannotationappbatchaddmodeb_f2c91336-aa02-4c1c-95cd-c4b830021104